<!DOCTYPE HTML>
<html>
	<head>
		<title>Slide Puzzle</title>
		<meta charset="UTF-8" />
		<link rel="stylesheet" href="estilo.css" />
	</head>
	<body>
		<h1>Slide Puzzle</h1>
		<div id="cenario">
			<div>1</div>
			<div>2</div>
			<div>3</div>
			<div>4</div>
			<div>5</div>
			<div>6</div>
			<div>7</div>
			<div>8</div>
		</div>
		<script>
			var cenarioE = document.getElementById("cenario");
			var tabuleiro = [
				[0,1,2],
				[3,4,5],
				[6,7,8]
			];

			function atualizar(){
				for (var l = 0; l < 3; l++) {
					for (var c = 0; c < 3; c++) {
						var divN = tabuleiro[l][c];
						if (divN>0) {
							var divE = cenarioE.children[divN-1];
							divE.style.left = c*100+"px";
							divE.style.top = l*100+"px";
						};
					}
				};
			}

			function mover(x) {
				console.log(x);
				for(var l = 0; l < 3; l++){
					for(var c = 0; c < 3; c++){
						if(tabuleiro[l][c]==0){
							if(tabuleiro[l][c-1]==x){
								troca(tabuleiro[l][c], tabuleiro[l][c-1], x);
								return;
							}
							if(tabuleiro[l][c+1]==x){
								//troca
								return;
							}
							if(tabuleiro[l-1][c]==x){
								//troca
								return;
							}
							if(tabuleiro[l+1][c]==x){
								//troca
								return;
							}
														

						}
					}
				}
			}

			function troca(a, b, c){
				var aux = a;
				a = c;
				b = aux;
				}

			function jogo(k) {
				return function(){
					mover(k);
					atualizar();
				}	
			}

			atualizar();

			for(var i = 0; i < 8; i++){
				var p = cenarioE.children[i];
				p.addEventListener("click", jogo(i+1));
		}
		</script>
	</body>
</html>